-- ScreenGui principal
local gui = Instance.new("ScreenGui")
gui.Parent = game.Players.LocalPlayer.PlayerGui

-- ImageButton arrastável (emoji dinheiro)
local emojiBtn = Instance.new("ImageButton")
emojiBtn.Size = UDim2.new(0, 60, 0, 60)
emojiBtn.Position = UDim2.new(0.1, 0, 0.1, 0)
emojiBtn.BackgroundTransparency = 1
emojiBtn.Image = "rbxassetid://6031075930" -- Imagem de dinheiro do Roblox (troque se quiser outro asset)
emojiBtn.Parent = gui
emojiBtn.Name = "ArrastavelEmoji"
emojiBtn.ZIndex = 10

-- Função para arrastar o emoji
local UserInputService = game:GetService("UserInputService")
local dragging, dragInput, dragStart, startPos

emojiBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = emojiBtn.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

emojiBtn.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        local delta = input.Position - dragStart
        emojiBtn.Position = UDim2.new(
            startPos.X.Scale, startPos.X.Offset + delta.X,
            startPos.Y.Scale, startPos.Y.Offset + delta.Y
        )
    end
end)

-- Frame GUI "apelao" (inicialmente invisível)
local apelaoFrame = Instance.new("Frame")
apelaoFrame.Size = UDim2.new(0, 200, 0, 160)
apelaoFrame.Position = UDim2.new(0.5, -100, 0.5, -80)
apelaoFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
apelaoFrame.Visible = false
apelaoFrame.Parent = gui
apelaoFrame.Name = "apelao"
apelaoFrame.ZIndex = 11

local titulo = Instance.new("TextLabel")
titulo.Size = UDim2.new(1,0,0.2,0)
titulo.Position = UDim2.new(0,0,0,0)
titulo.BackgroundTransparency = 1
titulo.Text = "GUI APELAO"
titulo.TextColor3 = Color3.fromRGB(255,255,127)
titulo.TextScaled = true
titulo.Parent = apelaoFrame

-- Botão ativar/desativar voo
local botao = Instance.new("TextButton")
botao.Size = UDim2.new(0.8,0,0.25,0)
botao.Position = UDim2.new(0.1,0,0.25,0)
botao.Text = "Ativar"
botao.BackgroundColor3 = Color3.fromRGB(0,170,0)
botao.TextColor3 = Color3.new(1,1,1)
botao.TextScaled = true
botao.Parent = apelaoFrame

-- Botão e label para Voo Radius (velocidade)
local vooRadiusLabel = Instance.new("TextLabel")
vooRadiusLabel.Size = UDim2.new(0.8,0,0.15,0)
vooRadiusLabel.Position = UDim2.new(0.1,0,0.55,0)
vooRadiusLabel.BackgroundTransparency = 1
vooRadiusLabel.Text = "Voo Radius: 50"
vooRadiusLabel.TextColor3 = Color3.new(1,1,1)
vooRadiusLabel.TextScaled = true
vooRadiusLabel.Parent = apelaoFrame

local vooRadiusBotao = Instance.new("TextButton")
vooRadiusBotao.Size = UDim2.new(0.8,0,0.18,0)
vooRadiusBotao.Position = UDim2.new(0.1,0,0.72,0)
vooRadiusBotao.Text = "Alterar Voo Radius"
vooRadiusBotao.BackgroundColor3 = Color3.fromRGB(70,70,170)
vooRadiusBotao.TextColor3 = Color3.new(1,1,1)
vooRadiusBotao.TextScaled = true
vooRadiusBotao.Parent = apelaoFrame

-- Abrir/fechar a GUI ao clicar no emoji
emojiBtn.MouseButton1Click:Connect(function()
    apelaoFrame.Visible = not apelaoFrame.Visible
end)

-- Variáveis do voo
local flying = false
local bp, bg
local SPEED = 50 -- valor inicial do voo radius

local function updateRadiusLabel()
    vooRadiusLabel.Text = "Voo Radius: " .. tostring(SPEED)
end

-- Botão de alterar Voo Radius (clique normal: +1, shift+clique: -1)
vooRadiusBotao.MouseButton1Click:Connect(function(input)
    if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or UserInputService:IsKeyDown(Enum.KeyCode.RightShift) then
        SPEED = math.max(1, SPEED - 1)
    else
        SPEED = math.min(100, SPEED + 1)
    end
    updateRadiusLabel()
end)

-- Função de voo na direção da câmera
local function startFly()
    local player = game.Players.LocalPlayer
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end

    bp = Instance.new("BodyVelocity")
    bp.MaxForce = Vector3.new(1e5, 1e5, 1e5)
    bp.Velocity = Vector3.new(0,0,0)
    bp.Parent = char.HumanoidRootPart

    bg = Instance.new("BodyGyro")
    bg.MaxTorque = Vector3.new(0,0,0)
    bg.Parent = char.HumanoidRootPart

    flying = true

    spawn(function()
        while flying and bp and char and char:FindFirstChild("HumanoidRootPart") do
            local camera = workspace.CurrentCamera
            bp.Velocity = camera.CFrame.LookVector * SPEED
            wait(0.01)
        end
    end)
end

local function stopFly()
    flying = false
    local char = game.Players.LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        if char.HumanoidRootPart:FindFirstChildOfClass("BodyVelocity") then
            char.HumanoidRootPart:FindFirstChildOfClass("BodyVelocity"):Destroy()
        end
        if char.HumanoidRootPart:FindFirstChildOfClass("BodyGyro") then
            char.HumanoidRootPart:FindFirstChildOfClass("BodyGyro"):Destroy()
        end
    end
end

-- Botão ativar/desativar voo
botao.MouseButton1Click:Connect(function()
    if not flying then
        startFly()
        botao.Text = "Desativar"
        botao.BackgroundColor3 = Color3.fromRGB(170,0,0)
    else
        stopFly()
        botao.Text = "Ativar"
        botao.BackgroundColor3 = Color3.fromRGB(0,170,0)
    end
end)

updateRadiusLabel()
